<!DOCTYPE html><html lang="en"><meta charset="UTF-8"><meta name="description" content="Sections, Style and Meta Data"><meta name="viewport" content="width=device-width,initial-scale=1"><title>Team Watch</title><meta name="theme-color" content="#8bc34a"><link rel="manifest" href="../manifest.json"><link rel="stylesheet" href="../css/main.css"><body><script src="../firebase.js"></script><script src="../firebase-firestore.js"></script><div class="header"><h1>Team Watch</h1></div><table id="header-table"><tr><td class="header-td"><a class="header-link" href="../index.html">Home</a></td><td class="header-td active"><a class="header-link" href="#">Game</a></td><td class="header-td"><a class="header-link" href="../player/player_list.html">Player</a></td><td class="header-td"><a class="header-link" href="../manage/view_profile.html">Manage</a></td></tr></table><div id="addGameWrapper" hidden><button class="button add-button" id="addGame" onclick='location.href="add_game.html"'>Add A Game</button><br><br><br><hr></div><div id="noGamesWrapper" hidden><br><h2 class="center">No games yet!</h2></div><div id="todaysGameDetails" hidden><div class="game-info center"><p class="game-title">Today's Game</p><div id="todayGameWrapper"></div><br></div><hr></div><div id="nextGameDetails" hidden><div id="next-games-wrapper"><div class="game-info center"><br><p class="game-title">Upcoming Games</p><div id="nextGameWrapper"></div></div></div></div><div id="prevGameDetails" hidden><hr><div class="game-info center"><p class="game-title">Previous Game</p><div id="prevGameWrapper"></div><br></div><hr></div><script>function getDateStr(e){var t=new Array("January","February","March","April","May","June","July","August","September","October","November","December"),a=e.getDate(),o=e.getMonth(),r=e.getFullYear(),c=e.getHours(),n=e.getMinutes(),l=(e.getSeconds(),c>=12?"pm":"am");return c%=12,c=c||12,n=n<10?"0"+n:n,t[o]+" "+a+", "+r+" "+c+":"+n+" "+l}function showAddGameButton(e){"coach"==e&&(document.getElementById("addGameWrapper").hidden=!1)}function editGame(e,t,a){"coach"==usertype&&(localStorage.setItem("coachuid",t),localStorage.setItem("gameId",e),location.href="edit_game.html")}function editStats(e,t){"coach"!=usertype&&"parent"!=usertype||(localStorage.setItem("coachuid",t),localStorage.setItem("gameId",e),location.href="edit_stats.html")}function viewStats(e,t){localStorage.setItem("coachuid",t),localStorage.setItem("gameId",e),location.href="view_stats.html"}</script><script src="../init.js"></script><script>function bucketGamesAndDisplay(e,t,a){var d="",n=new Date,i=Math.round(n.getTime()/1e3);if(e.dateObj.getFullYear()==n.getFullYear()&&e.dateObj.getMonth()==n.getMonth()&&e.dateObj.getDate()==n.getDate())document.getElementById("todaysGameDetails").hidden=!1,o=document.querySelector("#todayGameWrapper"),d=void 0==e.homeGoals?'<td><button id="editstats" onclick="editStats(\''+e.key+"','"+t+'\')" class="stats-button">Add Stats Live</button></button></td>':'<td><button id="viewStats" class="stats-button" onclick="viewStats(\''+e.key+"','"+t+"')\">View Stats  </button></td>";else if(i>e.date)document.getElementById("prevGameDetails").hidden=!1,o=document.querySelector("#prevGameWrapper"),d='<td><button id="viewStats" class="stats-button" onclick="viewStats(\''+e.key+"','"+t+"');\">View Stats           </button></td>";else if(i<e.date){document.getElementById("nextGameDetails").hidden=!1;var o=document.querySelector("#nextGameWrapper")}populateGame(o,e,d,t,a)}function populateGame(e,t,a,d,n){var i=document.createElement("div"),o=getDateStr(t.dateObj);i.innerHTML='<table class="stats-actions"> <tr>'+a+'<td>       <a class="editNextGame" href="javascript:editGame(\''+t.key+"','"+d+"','"+n+'\')">       <img style="margin-top: 1vh;" width=25 height=25 src="../images/edit2.png" alt="edit"> </a> </td> </tr> </table>      <div class="game-info center">       <p id="timeOfNextGame'+t.key+'">'+o+'</p>       <p id="locOfNextGame'+t.key+'">'+t.loc+'</p>       <p id="opponentOfNextGame'+t.key+'">'+t.oppTeam+'</p>       <p id="homeOrAwayNextGame'+t.key+'">'+t.homeOrAway+"</p> <br/> </div>",e.appendChild(i)}var db=firebase.firestore();firebase.firestore().enablePersistence().catch(function(e){console.log(e)});var usertype=null;firebase.auth().onAuthStateChanged(function(e){e?db.collection("users").doc(e.uid).get().then(function(t){var a=t.data().groupKey,d="teams/"+a+"/";usertype=t.data().usertype,showAddGameButton(usertype),db.collection(d+"gameSchedule/").get().then(function(t){t.docs?t.forEach(function(t){var d=t.data();d.key=t.id,d.dateObj=new Date(1e3*d.date),bucketGamesAndDisplay(d,a,e.uid)}):document.getElementById("noGamesWrapper").hidden=!1})}):location.href="../login.html"})</script></body></html>