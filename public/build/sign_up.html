<!DOCTYPE html><html lang="en"><meta charset="UTF-8"><meta name="description" content="Sections, Style and Meta Data"><meta name="viewport" content="width=device-width,initial-scale=1"><title>Team Watch</title><meta name="theme-color" content="#8bc34a"><link rel="manifest" href="manifest.json"><link rel="stylesheet" href="css/main.css"><script src="firebase.js"></script><script src="firebase-firestore.js"></script><script>var config={apiKey:"AIzaSyCfMC6E9eNfRbX7Zy--2UFkJkn3ffpgji8",authDomain:"cse134bfinal.firebaseapp.com",databaseURL:"https://cse134bfinal.firebaseio.com",projectId:"cse134bfinal",storageBucket:"cse134bfinal.appspot.com",messagingSenderId:"329284980436"};firebase.initializeApp(config);var db=firebase.firestore();firebase.firestore().enablePersistence().then(function(){firebase.firestore()}).catch(function(e){"failed-precondition"==e.code||e.code})</script><div class="header"><h1>Team Watch</h1></div><table id="header-table"><tr><td class="header-td active"><a class="header-link" href="index.html">Home</a></td><td class="header-td"><a class="header-link" href="game/game_schedule.html">Game</a></td><td class="header-td"><a class="header-link" href="player/player_list.html">Player</a></td><td class="header-td"><a class="header-link" href="manage/view_profile.html">Manage</a></td></tr></table><table class="playerinfo"><tr><td colspan="2"><img style="margin-left:70%" src="images/soccer_ball.png" alt="soccer ball"><tr><td><label>User ID(email):</label></td><td><input name="email" id="email"><tr><td><label>First Name:</label></td><td><input name="fname" id="fname"><tr><td><label>Last Name:</label></td><td><input name="lname" id="lname"><tr><td><label>Team Name:</label></td><td><input name="teamname" id="teamName"><tr><td><label>Password:</label></td><td><input name="password" id="password"><tr><td><label>Confirm Password:</label></td><td><input name="cpassword" id="cpassword"></td></tr></td></tr></td></tr></td></tr></td></tr></td></tr></td></tr></table><p class="p-error">Error with a field/fields.</p><div style="text-align:center"><input id="coachOption" type="radio" name="userType" value="coach"><label>Coach</label></div><div style="text-align:center"><input id="parentOption" type="radio" name="userType" value="parent"><label>Parent</label></div><div style="text-align:center"><input id="playerOption" type="radio" name="userType" value="player"><label>Player</label></div><div class="center" style="border-radius:.25rem"><input id="signUp" style="width:12rem;border-radius:.25rem" type="submit" value="Sign up" class="button"></div><script>function removeExtraFields(){addedExtraFields&&(lasttr.removeChild(lasttr.lastChild),lasttr.removeChild(lasttr.lastChild),addedExtraFields=!1)}function addExtraFields1(){removeExtraFields();var e=document.createElement("tr");e.innerHTML='<td><label>Coach Email: </label></td><td><input type="text" name="cemail" id="cemail"></td>';var t=document.createElement("tr");t.innerHTML='<td><label>Secret Password: </label></td><td><input type="text" name="spass" id="spass"></td>',lasttr.appendChild(e),lasttr.appendChild(t),addedExtraFields=!0}function addExtraFields2(){removeExtraFields();var e=document.createElement("tr");e.innerHTML='<td><label>Parent Password: </label></td><td><input type="text" name="parentPass" id="parentPass"></td>';var t=document.createElement("tr");t.innerHTML='<td><label>Player Password: </label></td><td><input type="text" name="playerPass" id="playerPass"></td>',lasttr.appendChild(e),lasttr.appendChild(t),addedExtraFields=!0}function addUser(e){var t=document.getElementsByClassName("p-error")[0];firebase.auth().createUserWithEmailAndPassword(e.email,e.password).then(function(a){firebase.auth().onAuthStateChanged(function(a){a&&a.updateProfile({displayName:e.fname+" "+e.lname}).then(function(){console.log(e.usertype),"coach"==e.usertype?(e.groupKey=a.uid,db.collection("groups/").doc(a.uid).set({coachEmail:a.email,teamName:e.teamName,playerPassword:e.playerPassword,parentPassword:e.parentPassword}).then(function(){addToUsers(a,e)})):addToUsers(a,e)},function(e){console.log(e),t.style.visibility="visible",t.textContent="We could not create an account."})})}).catch(function(e){e.code;var a=e.message;t.style.visibility="visible",t.textContent=a})}function addToUsers(e,t){db.collection("users/").doc(e.uid).set({groupKey:t.groupKey,usertype:t.usertype,teamName:t.teamName,fname:t.fname,lname:t.lname}).then(function(){location.href="index.html"})}var lasttr=document.querySelectorAll("table tbody")[1],userTypeOptions=document.querySelectorAll('[name="userType"]'),addedExtraFields=!1;for(i=0;i<userTypeOptions.length;++i)switch(i){case 0:userTypeOptions[i].onclick=addExtraFields2;break;case 1:case 2:userTypeOptions[i].onclick=addExtraFields1}var buttEl=document.getElementById("signUp");buttEl.onclick=function(){var e={name:"",fname:"",lname:"",email:"",profile_pic:"",usertype:"",password:"",teamName:"",parentPassword:"",playerPassword:""};e.email=document.getElementById("email").value,e.password=document.getElementById("password").value,e.fname=document.getElementById("fname").value,e.lname=document.getElementById("lname").value,e.name=e.fname+" "+e.lname;var t=document.getElementById("cpassword").value;e.teamName=document.getElementById("teamName").value,userTypeOptions=document.querySelectorAll('[name="userType"]');var a=!1;for(e.profile_pic="../images/profile_pic25.jpg",i=0;i<userTypeOptions.length;i++)userTypeOptions[i].checked&&(e.usertype=userTypeOptions[i].value,a=!0);var s=document.getElementsByClassName("p-error")[0],r=!0;if(""!=e.fname&&""!=e.lname&&""!=e.email||(s.style.visibility="visible",s.textContent="Missing a field.",r=!1),e.password!=t&&(s.style.visibility="visible",s.textContent="Passwords are not the same.",r=!1),!a)return s.style.visibility="visible",void(s.textContent="Select Coach, Parent, or Player.");if("coach"!=e.usertype){var l=document.querySelector("#cemail").value,n=document.querySelector("#spass").value;a=!1;db.collection("groups/").get().then(function(t){if(t.forEach(function(t){user=t.data(),user.teamName==e.teamName&&user.coachEmail==l&&user[e.usertype+"Password"]==n&&(e.groupKey=t.id,a=!0)}),a||(r=!1,s.style.visibility="visible",s.textContent="Team Name, Coach Email, and Secret Password do not match our records."),r){addUser(e)}})}else e.parentPassword=document.querySelector("#parentPass").value,e.playerPassword=document.querySelector("#playerPass").value,addUser(e)}</script></html>