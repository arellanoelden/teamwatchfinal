<!DOCTYPE html><html lang="en"><meta charset="UTF-8"><meta name="description" content="Sections, Style and Meta Data"><meta name="viewport" content="width=device-width,initial-scale=1"><title>Team Watch</title><meta name="theme-color" content="#8bc34a"><link rel="manifest" href="../manifest.json"><link rel="stylesheet" href="../css/main.css"><body><script src="../firebase.js"></script><script src="../firebase-firestore.js"></script><div class="header"><h1>Team Watch</h1></div><table id="header-table"><tr><td class="header-td"><a class="header-link" href="../index.html">Home</a></td><td class="header-td"><a class="header-link" href="../game/game_schedule.html">Game</a></td><td class="header-td active"><a class="header-link" href="../player/player_list.html">Player</a></td><td class="header-td"><a class="header-link" href="../manage/view_profile.html">Manage</a></td></tr></table><script>var loadfile=function(e){document.getElementById("profile_pic").src=URL.createObjectURL(e.target.files[0])}</script><table class="playerinfo"><tr><td><img src="../images/profilepic.jpg" alt="profile pic" id="profile_pic"></td><td><input onchange="loadfile(event)" style="border-radius:.25rem" type="file" value="Add a photo" class="button" id="addphoto"><tr><td><label>First Name:</label></td><td><input name="fname" id="fname"><tr><td><label>Last Name:</label></td><td><input name="lname" id="lname"><tr><td><label>Email Name:</label></td><td><input name="email" id="email"><tr><td><label>Date of Birth:</label></td><td><input name="DOB" id="DOB"><tr><td><label>Jersey Number:</label></td><td><input name="jersey" id="number"><tr><td><label>Position:</label></td><td><input name="position" id="position"><tr><td><label>Captain:</label></td><td><select id="captain" name="captain"><option id="coption">Yes</option><option id="coption">No</option></select></td></tr></td></tr></td></tr></td></tr></td></tr></td></tr></td></tr></td></tr></table><div class="center" style="border-radius:.25rem"><input style="border-radius:.25rem;width:21rem" type="submit" value="Save" id="editPlayer" class="button" onclick='location.href="player_list.html"'></div><div id="deletePlayerWrapper" hidden class="center" style="border-radius:.25rem"><input style="border-radius:.25rem" type="submit" value="Delete" id="deletePlayer" class="redbutton" onclick='location.href="player_list.html"'></div><script src="../init.js"></script><script>function uploadPlayerInfo(e,t){db.collection("teams/"+t+"/playerlist/").doc(localStorage.getItem("playerId")).update({name:e.name,fname:e.fname,lname:e.lname,email:e.email,DOB:e.DOB,number:e.number,position:e.position,profile_pic:e.profile_pic,captain:e.captain}).then(function(){location.href="player_list.html"})}function writePlayerData(e,t){firebase.auth().currentUser;var l=document.getElementById("addphoto").files,n=firebase.storage().ref();1==l.length?n.child(localStorage.getItem("playerId")).put(l[0]).then(function(l){n.child(localStorage.getItem("playerId")).getDownloadURL().then(function(l){e.profile_pic=l,uploadPlayerInfo(e,t)})}):(uploadPlayerInfo(e,t),location.href="player_list.html")}function deletePlayer(e){db.collection("teams/"+e+"/playerlist/").doc(localStorage.getItem("playerId")).delete().then(function(){}).then(function(e){location.href="player_list.html"}).catch(function(e){})}function fillInPicture(e){if(e.profile_pic){document.getElementById("profile_pic").src=e.profile_pic}}var db=firebase.firestore();firebase.firestore().enablePersistence().catch(function(e){console.log(e)}),firebase.auth().onAuthStateChanged(function(e){e||(location.href="../login.html"),showDeletePlayerButton(e.uid),db.collection("teams/"+e.uid+"/playerlist/").doc(localStorage.getItem("playerId")).get().then(function(t){for(var l=t.data(),n="",a=document.querySelectorAll(".playerinfo tr td:nth-child(2) > :first-child"),i=document.querySelectorAll(".playerinfo tr td img"),o=0;o<a.length;o++)if(a[o].hasAttribute("id")&&l[a[o].getAttribute("id")])if("captain"==(n=a[o].getAttribute("id"))){for(var r=document.querySelectorAll("#captain option"),c=0;c<r.length;c++)if(r[c].textContent==l[n]){r[c].setAttribute("selected",!0);break}}else a[o].setAttribute("value",l[n]);for(o=0;o<i.length;o++)i[o].hasAttribute("id")&&l[i[o].getAttribute("id")]&&(n=i[o].getAttribute("id"),i[o].textContent=l[n]);fillInPicture(l),document.getElementById("editPlayer").onclick=function(){var t={fname:"",lname:"",email:"",DOB:"",number:"",position:"",name:"",captain:""};t.fname=document.getElementById("fname").value,t.lname=document.getElementById("lname").value,t.email=document.getElementById("email").value,t.DOB=document.getElementById("DOB").value,t.number=document.getElementById("number").value,t.position=document.getElementById("position").value,t.name=document.getElementById("fname").value+" "+document.getElementById("lname").value,t.profile_pic=l.profile_pic;for(var n=document.querySelectorAll("#coption"),a=0;a<n.length;a++)n[a].selected&&(t.captain=n[a].value);writePlayerData(t,e.uid)},document.getElementById("deletePlayer").onclick=function(){deletePlayer(e.uid)}})})</script></body></html>